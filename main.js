(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{$:()=>J,QR:()=>M,UT:()=>N,vq:()=>w,oe:()=>T,Kn:()=>G,f:()=>O});var t=document.querySelector(".add-btn"),n=document.querySelector(".template-task"),o=document.querySelector(".tasks-list"),c=document.querySelector(".groups-list"),r=document.querySelector(".desc-dialog"),l=document.querySelector(".new-group-btn"),a=document.querySelector(".group-dialog"),u=document.querySelector("#group-input"),i=document.querySelector(".task-dialog"),d=document.querySelector("#select-group"),s=document.querySelector("#title-input"),g=document.querySelector("#date-input"),f=document.querySelector("#desc-input"),h=document.querySelector("#create-task-btn"),m=document.querySelector(".error-dialog"),p=!1;function v(e){for(;null!=o.lastChild&&o.lastChild!==n;)o.removeChild(o.lastChild);e.forEach((function(e){e.getGroup()===T()&&function(e){var t=n.cloneNode(!0);t.classList.remove("template-task"),t.querySelector(".title").textContent=e.getTitle(),t.querySelector(".date").textContent=e.getDueDate();var c=t.querySelector(".checked");c.checked=e.isChecked(),c.addEventListener("click",(function(){e.setChecked(c.checked)})),t.querySelector(".remove-btn").addEventListener("click",(function(){w(e)})),t.querySelector(".expand-btn").addEventListener("mouseup",(function(t){if(!p){var n=t.clientX,o=t.clientY;r.style="top: ".concat(o,"px; left: calc(").concat(n,"px);"),r.querySelector("p").textContent=e.getDescription(),r.show(),p=!0}})),o.appendChild(t)}(e)}))}function S(){for(;null!=d.firstChild;)d.removeChild(d.firstChild);O().forEach((function(e){var t=document.createElement("option");t.textContent=e,d.append(t)}))}function y(){for(;null!=c.firstChild;)c.removeChild(c.firstChild);for(var e=function(e){var t=document.createElement("div");t.classList.add("clickable"),t.textContent=O()[e],t.addEventListener("click",(function(){!function(e){M(e),q()}(e)})),c.appendChild(t)},t=0;t<O().length;t++)e(t);q()}function q(){for(var e=0;e<c.childElementCount;e++)c.childNodes[e].classList.remove("selected");c.childNodes[G()].classList.add("selected")}t.addEventListener("click",(function(){S(),i.showModal()})),l.addEventListener("click",(function(){a.showModal()})),i.querySelector(".cancel").addEventListener("click",(function(){i.close()})),a.querySelector(".add").addEventListener("click",(function(){J(u.value)&&(S(),a.close())})),a.querySelector(".cancel").addEventListener("click",(function(){a.close()})),h.addEventListener("click",(function(){var e,t,n;e=d.value,t=s.value,n=g.value,N(t,f.value,n,e)&&i.close()})),document.body.addEventListener("mousedown",(function(){p&&(r.close(),p=!1)})),m.querySelector("button").addEventListener("click",(function(){m.close()}));var k="No issue was found in the input";function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return e.length<n?(E("the minimum input length is ".concat(n),t),!1):null!=o&&e.length>o?(E("the maximum input length is ".concat(o),t),!1):(console.log(k+", "+t),!0)}function E(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log("".concat(e,', "').concat(o,'"')),t=o,n=e,m.querySelector(".header").textContent=t,m.querySelector("p").textContent=n,m.showModal()}var L=[],I=["daily"],x=Number(),b="groupsarr";function D(e,t,n,o){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{getTitle:function(){return e},getDescription:function(){return t},getDueDate:function(){return n},getGroup:function(){return o},isChecked:function(){return c},setChecked:function(e){c=e,P()}}}function N(e,t,n,o){if(!C(e,"Task Title",1,20)||!C(n,"dueDate",1))return!1;var c=D(e,t,n,o);return L.push(c),v(L),P(),!0}function w(e){var t=L.indexOf(e);L.splice(t,1),P(),v(L)}function O(){return I}function T(){return I[x]}function G(){return x}function J(e){return!!function(e){if(""===e)return E("Please enter group name!"),!1;for(var t=O(),n=0;n<t.length;n++)if(e===t[n])return E("Group already exist!"),!1;return console.log(k+", Group"),!0}(e)&&(I.push(e),y(),P(),!0)}function M(e){x=e,v(L)}function P(){for(var e=0;e<L.length;e++)localStorage.setItem("title".concat(e),L[e].getTitle()),localStorage.setItem("desc".concat(e),L[e].getDescription()),localStorage.setItem("date".concat(e),L[e].getDueDate()),localStorage.setItem("group".concat(e),L[e].getGroup()),localStorage.setItem("checked".concat(e),JSON.parse(L[e].isChecked()));localStorage.setItem("arraylength",L.length),localStorage.setItem(b,JSON.stringify(I))}localStorage.length>0&&(function(){for(var e=localStorage.getItem("arraylength"),t=0;t<e;t++){var n=D(localStorage.getItem("title".concat(t)),localStorage.getItem("desc".concat(t)),localStorage.getItem("date".concat(t)),localStorage.getItem("group".concat(t)),JSON.parse(localStorage.getItem("checked".concat(t))));L.push(n)}v(L)}(),I=JSON.parse(localStorage.getItem(b))),y()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBS3hDLEVBQU13QyxHQUFHNUIsWUFDM0N3RSxhQUFhQyxRQUFRLE9BQUQzRCxPQUFRYyxHQUFLeEMsRUFBTXdDLEdBQUdiLGtCQUMxQ3lELGFBQWFDLFFBQVEsT0FBRDNELE9BQVFjLEdBQUt4QyxFQUFNd0MsR0FBRzNCLGNBQzFDdUUsYUFBYUMsUUFBUSxRQUFEM0QsT0FBU2MsR0FBS3hDLEVBQU13QyxHQUFHbkMsWUFDM0MrRSxhQUFhQyxRQUFRLFVBQUQzRCxPQUFXYyxHQUFLOEMsS0FBS0MsTUFBTXZGLEVBQU13QyxHQUFHeEIsY0FHNURvRSxhQUFhQyxRQUFRLGNBQWVyRixFQUFNNkMsUUFDMUN1QyxhQUFhQyxRQUFRWixFQUFlYSxLQUFLRSxVQUFVbEIsR0FDdkQsQ0FmT2MsYUFBYXZDLE9BQVMsSUFxQjdCLFdBS0ksSUFEQSxJQUFJQSxFQUFTdUMsYUFBYUssUUFBUSxlQUMxQmpELEVBQUksRUFBR0EsRUFBSUssRUFBUUwsSUFBSyxDQUM1QixJQU1Jc0MsRUFBVUosRUFORlUsYUFBYUssUUFBUSxRQUFEL0QsT0FBU2MsSUFDOUI0QyxhQUFhSyxRQUFRLE9BQUQvRCxPQUFRYyxJQUM1QjRDLGFBQWFLLFFBQVEsT0FBRC9ELE9BQVFjLElBQzNCNEMsYUFBYUssUUFBUSxRQUFEL0QsT0FBU2MsSUFDM0I4QyxLQUFLQyxNQUFNSCxhQUFhSyxRQUFRLFVBQUQvRCxPQUFXYyxNQUd4RHhDLEVBQU0rRSxLQUFLRCxFQUNmLENBRUEvRSxFQUFnQkMsRUFDcEIsQ0FyQkkwRixHQUNBcEIsRUFBU2dCLEtBQUtDLE1BQU1ILGFBQWFLLFFBQVFoQixLQWpGN0NuQyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vc3JjL3Zpc3VhbC5qcyIsIndlYnBhY2s6Ly9teS13ZWJwYWNrLXByb2plY3QvLi9zcmMvdmFsaWRhdG9yLmpzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IGNyZWF0ZVRhc2ssIGRlbGV0ZVRhc2ssIGdldEdyb3VwcyxcbiAgICAgICAgIGFkZEdyb3VwLCBjaGFuZ2VDdXJHcm91cCwgZ2V0Q3VyR3JvdXAsXG4gICAgICAgICBnZXRDdXJHcm91cEluZGV4IH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtYnRuXCIpXG5jb25zdCB0ZW1wbGF0ZVRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRlbXBsYXRlLXRhc2tcIilcbmNvbnN0IHRhc2tMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrcy1saXN0XCIpXG5jb25zdCBncm91cHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncm91cHMtbGlzdFwiKVxuXG5jb25zdCBkZXNjRGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZXNjLWRpYWxvZ1wiKVxuXG5jb25zdCBuZXdHcm91cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LWdyb3VwLWJ0blwiKVxuY29uc3QgZ3JvdXBEaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyb3VwLWRpYWxvZ1wiKVxuY29uc3QgZ3JvdXBJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZ3JvdXAtaW5wdXRcIilcblxuY29uc3QgdGFza0RpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1kaWFsb2dcIilcbmNvbnN0IGdyb3VwU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzZWxlY3QtZ3JvdXBcIilcbmNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlLWlucHV0XCIpXG5jb25zdCBkYXRlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RhdGUtaW5wdXRcIilcbmNvbnN0IGRlc2NJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzYy1pbnB1dFwiKVxuY29uc3QgY3JlYXRlVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY3JlYXRlLXRhc2stYnRuXCIpXG5cbmNvbnN0IGVycm9yRGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcnJvci1kaWFsb2dcIilcblxubGV0IGlzRGVzY01vZGFsID0gZmFsc2U7XG5cbmFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIFVwZGF0ZVNlbGVjdEdyb3VwTGlzdCgpO1xuICAgIHRhc2tEaWFsb2cuc2hvd01vZGFsKCk7XG59KVxuXG5uZXdHcm91cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGdyb3VwRGlhbG9nLnNob3dNb2RhbCgpO1xufSlcbnRhc2tEaWFsb2cucXVlcnlTZWxlY3RvcihcIi5jYW5jZWxcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICB0YXNrRGlhbG9nLmNsb3NlKCk7XG59KVxuZ3JvdXBEaWFsb2cucXVlcnlTZWxlY3RvcihcIi5hZGRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBpZihhZGRHcm91cChncm91cElucHV0LnZhbHVlKSkge1xuICAgICAgICBVcGRhdGVTZWxlY3RHcm91cExpc3QoKTtcbiAgICAgICAgZ3JvdXBEaWFsb2cuY2xvc2UoKTtcbiAgICB9XG59KVxuZ3JvdXBEaWFsb2cucXVlcnlTZWxlY3RvcihcIi5jYW5jZWxcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBncm91cERpYWxvZy5jbG9zZSgpO1xufSlcblxuY3JlYXRlVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGdldE5ld1Rhc2tJbmZvKCk7XG59KVxuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsICgpID0+IHtcbiAgICBpZihpc0Rlc2NNb2RhbCkge1xuICAgICAgICBkZXNjRGlhbG9nLmNsb3NlKCk7XG4gICAgICAgIGlzRGVzY01vZGFsID0gZmFsc2U7XG4gICAgfVxufSlcbmVycm9yRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgIGVycm9yRGlhbG9nLmNsb3NlKCk7XG59KVxuXG5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2tFbGVtZW50KHRhc2spIHtcbiAgICBjb25zdCBlbGVtZW50ID0gdGVtcGxhdGVUYXNrLmNsb25lTm9kZSh0cnVlKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZW1wbGF0ZS10YXNrXCIpO1xuXG4gICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlXCIpLnRleHRDb250ZW50ID0gdGFzay5nZXRUaXRsZSgpO1xuICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5kYXRlXCIpLnRleHRDb250ZW50ID0gdGFzay5nZXREdWVEYXRlKCk7XG4gICAgY29uc3QgY2hlY2tlZEVsZW1lbnQgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tlZFwiKTtcbiAgICBjaGVja2VkRWxlbWVudC5jaGVja2VkID0gdGFzay5pc0NoZWNrZWQoKTtcblxuICAgIFxuICAgIGNoZWNrZWRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRhc2suc2V0Q2hlY2tlZChjaGVja2VkRWxlbWVudC5jaGVja2VkKTtcbiAgICB9KVxuICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZW1vdmUtYnRuXCIpLlxuICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGRlbGV0ZVRhc2sodGFzayk7XG4gICAgfSlcbiAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXhwYW5kLWJ0blwiKS5cbiAgICBhZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYoIWlzRGVzY01vZGFsKSB7XG4gICAgICAgICAgICBsZXQgbW91c2VQb3NYID0gZXZlbnQuY2xpZW50WFxuICAgICAgICAgICAgbGV0IG1vdXNlUG9zWSA9IGV2ZW50LmNsaWVudFk7XG4gICAgICAgICAgICBkZXNjRGlhbG9nLnN0eWxlID0gYHRvcDogJHttb3VzZVBvc1l9cHg7IGxlZnQ6IGNhbGMoJHttb3VzZVBvc1h9cHgpO2BcbiAgICAgICAgICAgIGRlc2NEaWFsb2cucXVlcnlTZWxlY3RvcihcInBcIikudGV4dENvbnRlbnQgPSB0YXNrLmdldERlc2NyaXB0aW9uKCk7XG4gICAgICAgICAgICBkZXNjRGlhbG9nLnNob3coKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaXNEZXNjTW9kYWwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSlcbiAgICB0YXNrTGlzdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlVGFza3NMaXN0KHRhc2tzKSB7XG4gICAgXG4gICAgd2hpbGUodGFza0xpc3QubGFzdENoaWxkICE9IG51bGwgJiYgXG4gICAgICAgICAgdGFza0xpc3QubGFzdENoaWxkICE9PSB0ZW1wbGF0ZVRhc2spIHtcbiAgICAgICAgdGFza0xpc3QucmVtb3ZlQ2hpbGQodGFza0xpc3QubGFzdENoaWxkKTtcbiAgICB9XG5cbiAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgIGlmKHRhc2suZ2V0R3JvdXAoKSA9PT0gZ2V0Q3VyR3JvdXAoKSlcbiAgICAgICAgY3JlYXRlVGFza0VsZW1lbnQodGFzayk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gVXBkYXRlU2VsZWN0R3JvdXBMaXN0KCkge1xuICAgIHdoaWxlKGdyb3VwU2VsZWN0LmZpcnN0Q2hpbGQgIT0gbnVsbCkge1xuICAgICAgICBncm91cFNlbGVjdC5yZW1vdmVDaGlsZChncm91cFNlbGVjdC5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBnZXRHcm91cHMoKS5mb3JFYWNoKChncm91cCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKVxuICAgICAgICBpdGVtLnRleHRDb250ZW50ID0gZ3JvdXA7XG4gICAgICAgIGdyb3VwU2VsZWN0LmFwcGVuZChpdGVtKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIFVwZGF0ZUdyb3VwTGlzdCgpIHtcbiAgICB3aGlsZShncm91cHNMaXN0LmZpcnN0Q2hpbGQgIT0gbnVsbCkge1xuICAgICAgICBncm91cHNMaXN0LnJlbW92ZUNoaWxkKGdyb3Vwc0xpc3QuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdldEdyb3VwcygpLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNsaWNrYWJsZVwiKVxuICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gZ2V0R3JvdXBzKClbaV07XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHNlbGVjdEdyb3VwKGkpO1xuICAgICAgICB9KVxuICAgICAgICBncm91cHNMaXN0LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH1cbiAgICBzZXRHcm91cHNTdHlsZSgpO1xufVxuXG5mdW5jdGlvbiBzZWxlY3RHcm91cChpKSB7XG4gICAgY2hhbmdlQ3VyR3JvdXAoaSk7XG4gICAgc2V0R3JvdXBzU3R5bGUoKTtcbn1cblxuZnVuY3Rpb24gc2V0R3JvdXBzU3R5bGUoKSB7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyb3Vwc0xpc3QuY2hpbGRFbGVtZW50Q291bnQ7IGkrKykge1xuICAgICAgICBncm91cHNMaXN0LmNoaWxkTm9kZXNbaV0uY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpXG4gICAgfVxuICAgIGdyb3Vwc0xpc3QuY2hpbGROb2Rlc1tnZXRDdXJHcm91cEluZGV4KCldLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKVxufVxuXG5mdW5jdGlvbiBnZXROZXdUYXNrSW5mbygpIHtcbiAgICBjb25zdCBncm91cCA9IGdyb3VwU2VsZWN0LnZhbHVlOyAvL3N0cmluZ1xuICAgIGNvbnN0IHRpdGxlID0gdGl0bGVJbnB1dC52YWx1ZTtcbiAgICBjb25zdCBkYXRlID0gZGF0ZUlucHV0LnZhbHVlO1xuICAgIGNvbnN0IGRlc2MgPSBkZXNjSW5wdXQudmFsdWU7XG5cbiAgICBpZihjcmVhdGVUYXNrKHRpdGxlLCBkZXNjLCBkYXRlLCBncm91cCkpIHtcbiAgICAgICAgdGFza0RpYWxvZy5jbG9zZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2hvd0Vycm9yRGlhbG9nKHRpdGxlLCBkZXNjcmlwdGlvbikge1xuICAgIGVycm9yRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyXCIpLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgZXJyb3JEaWFsb2cucXVlcnlTZWxlY3RvcihcInBcIikudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcbiAgICBlcnJvckRpYWxvZy5zaG93TW9kYWwoKTtcbn1cblxuXG5leHBvcnQgeyB1cGRhdGVUYXNrc0xpc3QsIFVwZGF0ZUdyb3VwTGlzdCwgc2hvd0Vycm9yRGlhbG9nIH0iLCJpbXBvcnQgeyBnZXRHcm91cHMgfSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHsgc2hvd0Vycm9yRGlhbG9nIH0gZnJvbSBcIi4vdmlzdWFsXCI7XG5cbmNvbnN0IE5PX0lTU1VFX01FU1NBR0UgPSBcIk5vIGlzc3VlIHdhcyBmb3VuZCBpbiB0aGUgaW5wdXRcIlxuXG5mdW5jdGlvbiB2YWxpZGF0ZUdyb3VwKGlucHV0KSB7XG4gICAgaWYoaW5wdXQgPT09IFwiXCIpIHtcbiAgICAgICAgdGhyb3dFcnJvcihcIlBsZWFzZSBlbnRlciBncm91cCBuYW1lIVwiKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGxldCBncm91cHMgPSBnZXRHcm91cHMoKTtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmKGlucHV0ID09PSBncm91cHNbaV0pIHtcbiAgICAgICAgICAgIHRocm93RXJyb3IoXCJHcm91cCBhbHJlYWR5IGV4aXN0IVwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKE5PX0lTU1VFX01FU1NBR0UgKyBcIiwgXCIgKyBcIkdyb3VwXCIpXG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVRleHQoaW5wdXQsIGlucHV0TmFtZSwgbWluID0gMCwgbWF4ID0gbnVsbCkge1xuICAgIGlmKGlucHV0Lmxlbmd0aCA8IG1pbikge1xuICAgICAgICB0aHJvd0Vycm9yKGB0aGUgbWluaW11bSBpbnB1dCBsZW5ndGggaXMgJHttaW59YCwgaW5wdXROYW1lKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVsc2UgaWYobWF4ICE9IG51bGwgJiYgaW5wdXQubGVuZ3RoID4gbWF4KSB7XG4gICAgICAgIHRocm93RXJyb3IoYHRoZSBtYXhpbXVtIGlucHV0IGxlbmd0aCBpcyAke21heH1gLCBpbnB1dE5hbWUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coTk9fSVNTVUVfTUVTU0FHRSArIFwiLCBcIiArIGlucHV0TmFtZSlcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gdGhyb3dFcnJvcihtZXNzYWdlLCBpbnB1dE5hbWUgPSBcIlwiKSB7XG4gICAgY29uc29sZS5sb2coYCR7bWVzc2FnZX0sIFwiJHtpbnB1dE5hbWV9XCJgKTtcbiAgICBzaG93RXJyb3JEaWFsb2coaW5wdXROYW1lLCBtZXNzYWdlKVxufVxuXG5leHBvcnQgeyB2YWxpZGF0ZUdyb3VwLCB2YWxpZGF0ZVRleHQgfSIsImltcG9ydCBcIi4vc3R5bGUuY3NzXCJcbmltcG9ydCB7IHVwZGF0ZVRhc2tzTGlzdCwgVXBkYXRlR3JvdXBMaXN0IH0gZnJvbSBcIi4vdmlzdWFsXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUdyb3VwLCB2YWxpZGF0ZVRleHQgfSBmcm9tIFwiLi92YWxpZGF0b3JcIjtcblxubGV0IHRhc2tzID0gW107XG5sZXQgZ3JvdXBzID0gW1wiZGFpbHlcIl07XG5sZXQgY3VyR3JvdXAgPSBOdW1iZXIoKTtcblxuY29uc3QgVEFTS1NfU1RSSU5HID0gXCJ0YXNrc2FyclwiXG5jb25zdCBHUk9VUFNfU1RSSU5HID0gXCJncm91cHNhcnJcIlxuXG5oYW5kbGVTdG9yYWdlKCk7XG5VcGRhdGVHcm91cExpc3QoKTtcblxuZnVuY3Rpb24gVGFzayh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIGdyb3VwLCBjaGVja2VkID0gZmFsc2UpIHtcbiAgICBjb25zdCBnZXRUaXRsZSA9ICgpID0+IHRpdGxlXG4gICAgY29uc3QgZ2V0RGVzY3JpcHRpb24gPSAoKSA9PiBkZXNjcmlwdGlvblxuICAgIGNvbnN0IGdldER1ZURhdGUgPSAoKSA9PiBkdWVEYXRlXG4gICAgY29uc3QgZ2V0R3JvdXAgPSAoKSA9PiBncm91cFxuICAgIGNvbnN0IGlzQ2hlY2tlZCA9ICgpID0+IGNoZWNrZWQ7XG5cbiAgICBjb25zdCBzZXRDaGVja2VkID0gKHZhbHVlKSA9PiB7XG4gICAgICAgIGNoZWNrZWQgPSB2YWx1ZTtcbiAgICAgICAgcG9wdWxhdGVTdG9yYWdlKCk7XG4gICAgfTtcblxuICAgIHJldHVybiB7IGdldFRpdGxlLCBnZXREZXNjcmlwdGlvbiwgZ2V0RHVlRGF0ZSxcbiAgICAgICAgICAgICBnZXRHcm91cCwgaXNDaGVja2VkLCBzZXRDaGVja2VkfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVUYXNrKHRpdGxlLCBkZXNjLCBkdWVEYXRlLCBncm91cCkge1xuICAgIGlmKCF2YWxpZGF0ZVRleHQodGl0bGUsIFwiVGFzayBUaXRsZVwiLCAxLCAyMCkgfHxcbiAgICAgICAhdmFsaWRhdGVUZXh0KGR1ZURhdGUsIFwiZHVlRGF0ZVwiLCAxKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgbmV3VGFzayA9IFRhc2sodGl0bGUsIGRlc2MsIGR1ZURhdGUsIGdyb3VwKTtcbiAgICB0YXNrcy5wdXNoKG5ld1Rhc2spO1xuICAgIHVwZGF0ZVRhc2tzTGlzdCh0YXNrcyk7XG4gICAgcG9wdWxhdGVTdG9yYWdlKCk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBkZWxldGVUYXNrKHRhc2spIHtcbiAgICBjb25zdCBpbmRleCA9IHRhc2tzLmluZGV4T2YodGFzayk7XG4gICAgdGFza3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICBwb3B1bGF0ZVN0b3JhZ2UoKTtcbiAgICB1cGRhdGVUYXNrc0xpc3QodGFza3MpO1xufVxuXG5mdW5jdGlvbiBnZXRHcm91cHMoKSB7XG4gICAgcmV0dXJuIGdyb3Vwcztcbn1cbmZ1bmN0aW9uIGdldEN1ckdyb3VwKCkge1xuICAgIHJldHVybiBncm91cHNbY3VyR3JvdXBdO1xufVxuZnVuY3Rpb24gZ2V0Q3VyR3JvdXBJbmRleCgpIHtcbiAgICByZXR1cm4gY3VyR3JvdXA7XG59XG5mdW5jdGlvbiBhZGRHcm91cChpbnB1dCkge1xuICAgIGlmKHZhbGlkYXRlR3JvdXAoaW5wdXQpKSB7XG4gICAgICAgIGdyb3Vwcy5wdXNoKGlucHV0KVxuICAgICAgICBVcGRhdGVHcm91cExpc3QoKTtcbiAgICAgICAgcG9wdWxhdGVTdG9yYWdlKCk7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG59XG5mdW5jdGlvbiBjaGFuZ2VDdXJHcm91cChpbmRleCkge1xuICAgIGN1ckdyb3VwID0gaW5kZXg7XG4gICAgdXBkYXRlVGFza3NMaXN0KHRhc2tzKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU3RvcmFnZSgpIHtcbiAgICBpZihsb2NhbFN0b3JhZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICBnZXRTdG9yYWdlKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcG9wdWxhdGVTdG9yYWdlKCkge1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0YXNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgdGl0bGUke2l9YCwgdGFza3NbaV0uZ2V0VGl0bGUoKSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGRlc2Mke2l9YCwgdGFza3NbaV0uZ2V0RGVzY3JpcHRpb24oKSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGRhdGUke2l9YCwgdGFza3NbaV0uZ2V0RHVlRGF0ZSgpKVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgZ3JvdXAke2l9YCwgdGFza3NbaV0uZ2V0R3JvdXAoKSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGNoZWNrZWQke2l9YCwgSlNPTi5wYXJzZSh0YXNrc1tpXS5pc0NoZWNrZWQoKSkpXG4gICAgfVxuXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhcnJheWxlbmd0aFwiLCB0YXNrcy5sZW5ndGgpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEdST1VQU19TVFJJTkcsIEpTT04uc3RyaW5naWZ5KGdyb3VwcykpO1xufVxuZnVuY3Rpb24gZ2V0U3RvcmFnZSgpIHtcbiAgICBjcmVhdGVUYXNrc09iamVjdHMoKTtcbiAgICBncm91cHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKEdST1VQU19TVFJJTkcpKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFza3NPYmplY3RzKCkge1xuICAgIC8vIGxldCBuZXd0YXNrID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShUQVNLU19TVFJJTkcpKVxuICAgIC8vIGNvbnNvbGUubG9nKG5ld3Rhc2spXG4gICAgLy8gY29uc29sZS5sb2cobmV3dGFzay5pc0NoZWNrZWQoKSlcbiAgICBsZXQgbGVuZ3RoID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJhcnJheWxlbmd0aFwiKVxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgdGl0bGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgdGl0bGUke2l9YClcbiAgICAgICAgbGV0IGRlc2MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgZGVzYyR7aX1gKVxuICAgICAgICBsZXQgZGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBkYXRlJHtpfWApXG4gICAgICAgIGxldCBncm91cCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBncm91cCR7aX1gKVxuICAgICAgICBsZXQgY2hlY2tlZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oYGNoZWNrZWQke2l9YCkpXG5cbiAgICAgICAgbGV0IG5ld1Rhc2sgPSBUYXNrKHRpdGxlLCBkZXNjLCBkYXRlLCBncm91cCwgY2hlY2tlZClcbiAgICAgICAgdGFza3MucHVzaChuZXdUYXNrKTtcbiAgICB9XG5cbiAgICB1cGRhdGVUYXNrc0xpc3QodGFza3MpO1xufVxuXG5cbmV4cG9ydCB7IGNyZWF0ZVRhc2ssIGRlbGV0ZVRhc2ssIGdldEdyb3VwcywgYWRkR3JvdXAsXG4gICAgICAgICBjaGFuZ2VDdXJHcm91cCwgZ2V0Q3VyR3JvdXAsIGdldEN1ckdyb3VwSW5kZXggfSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFkZEJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRlbXBsYXRlVGFzayIsInRhc2tMaXN0IiwiZ3JvdXBzTGlzdCIsImRlc2NEaWFsb2ciLCJuZXdHcm91cEJ0biIsImdyb3VwRGlhbG9nIiwiZ3JvdXBJbnB1dCIsInRhc2tEaWFsb2ciLCJncm91cFNlbGVjdCIsInRpdGxlSW5wdXQiLCJkYXRlSW5wdXQiLCJkZXNjSW5wdXQiLCJjcmVhdGVUYXNrQnRuIiwiZXJyb3JEaWFsb2ciLCJpc0Rlc2NNb2RhbCIsInVwZGF0ZVRhc2tzTGlzdCIsInRhc2tzIiwibGFzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJmb3JFYWNoIiwidGFzayIsImdldEdyb3VwIiwiZ2V0Q3VyR3JvdXAiLCJlbGVtZW50IiwiY2xvbmVOb2RlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJnZXRUaXRsZSIsImdldER1ZURhdGUiLCJjaGVja2VkRWxlbWVudCIsImNoZWNrZWQiLCJpc0NoZWNrZWQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0Q2hlY2tlZCIsImRlbGV0ZVRhc2siLCJldmVudCIsIm1vdXNlUG9zWCIsImNsaWVudFgiLCJtb3VzZVBvc1kiLCJjbGllbnRZIiwic3R5bGUiLCJjb25jYXQiLCJnZXREZXNjcmlwdGlvbiIsInNob3ciLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRhc2tFbGVtZW50IiwiVXBkYXRlU2VsZWN0R3JvdXBMaXN0IiwiZmlyc3RDaGlsZCIsImdldEdyb3VwcyIsImdyb3VwIiwiaXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmQiLCJVcGRhdGVHcm91cExpc3QiLCJfbG9vcCIsImkiLCJhZGQiLCJjaGFuZ2VDdXJHcm91cCIsInNldEdyb3Vwc1N0eWxlIiwic2VsZWN0R3JvdXAiLCJsZW5ndGgiLCJjaGlsZEVsZW1lbnRDb3VudCIsImNoaWxkTm9kZXMiLCJnZXRDdXJHcm91cEluZGV4Iiwic2hvd01vZGFsIiwiY2xvc2UiLCJhZGRHcm91cCIsInZhbHVlIiwidGl0bGUiLCJkYXRlIiwiY3JlYXRlVGFzayIsImJvZHkiLCJOT19JU1NVRV9NRVNTQUdFIiwidmFsaWRhdGVUZXh0IiwiaW5wdXQiLCJpbnB1dE5hbWUiLCJtaW4iLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJtYXgiLCJ0aHJvd0Vycm9yIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2UiLCJkZXNjcmlwdGlvbiIsImdyb3VwcyIsImN1ckdyb3VwIiwiTnVtYmVyIiwiR1JPVVBTX1NUUklORyIsIlRhc2siLCJkdWVEYXRlIiwicG9wdWxhdGVTdG9yYWdlIiwiZGVzYyIsIm5ld1Rhc2siLCJwdXNoIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwidmFsaWRhdGVHcm91cCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJnZXRJdGVtIiwiY3JlYXRlVGFza3NPYmplY3RzIl0sInNvdXJjZVJvb3QiOiIifQ==